<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Carousels | studio.sakupi01.com</title>
    <style>
        .container {
            /* コンテナクエリを使用できるようにするために、コンテナ要素を定義する */
            container-type: inline-size;
            width: 50vw;
        }

        .base {
            border: 1px solid #ff0000;
            padding: 0;
            list-style-type: none;
            inline-size: 100cqi;
            display: grid;
            grid-auto-flow: column;
            grid-auto-columns: 80cqi;
            gap: 1.25rem;
            padding-block: .5rem;
            scroll-padding-inline: 5vmin;
            aspect-ratio: 16 / 9;

            >.item {
                border-radius: 10px;
                border: 1px solid black;
                overflow: hidden;
                counter-increment: item;

                >.content {
                    display: grid;
                    place-content: center;
                    font-size: 5cqi;
                    font-weight: bold;
                    height: 100%;
                    width: 100%;
                }
            }
        }

        /* snap scrollbars */
        .carousel {
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            overscroll-behavior-inline: contain;
            scroll-behavior: smooth;

            >.item {
                /* We want to enable the <section> elements to be queried. to control opacity and interactivity based on their scroll snap position. */
                container-type: scroll-state;
                container-name: snap-container;
                scroll-snap-align: center;

                >.content {
                    /* Make all content inside slides inert by default */
                    interactivity: inert;
                    opacity: 0.5;
                    background-color: lightgray;
                    color: #333;
                    transition: all 0.3s ease;
                }

                @container snap-container scroll-state(snapped: inline) {
                    >.content {
                        interactivity: auto;
                        opacity: 1;
                        background-color: rebeccapurple;
                        color: white;
                    }
                }
            }


        }


        /* scroll arrow buttons */
        .carousel {
            --anchor-name: attr(data-anchor-name type(<custom-ident>), --carousel-container);
            anchor-name: var(--anchor-name);
            anchor-scope: var(--anchor-name);

            &::scroll-button(*) {
                position: absolute;
                position-anchor: var(--anchor-name);

                &:focus-visible {
                    outline-offset: 5px;
                }
            }

            /* The browser will create real buttons, with your content inside, as siblings to the scroller.  */
            &::scroll-button(left) {
                position-area: block-end span-inline-end;
                /* Specify content with optional accessible fallback alt text. */
                content: "⬅" / "Scroll Left";
                position-area: left center;
            }

            &::scroll-button(right) {
                position-area: block-end span-inline-start;
                content: "⮕" / "Scroll Right";
                position-area: right center;
            }
        }

        /* scroll marker */
        .carousel {
            /* スクロールコンテナーに ::scroll-marker-group 擬似要素を生成するかどうか、生成する場合、既定の視覚的およびタブ順でコンテナーのコンテンツの直前 (before) に配置するか、直後 (after) に配置するかを制御 */
            scroll-marker-group: after;

            &::scroll-marker-group {
                position: fixed;
                position-anchor: attr(data-anchor-name type(<custom-ident>), --carousel-container);
                position-area: block-end;
                margin: 10px;
                display: grid;
                grid-auto-columns: 20px;
                grid-auto-flow: column;
                gap: 20px;
            }

            .item::scroll-marker {
                content: "" / "Content" counter(item);
                cursor: pointer;
                aspect-ratio: 1;
                border-radius: 50%;
                border: 1px solid #333;
                background-color: lightgray;

                /* ⭐ Pseudo-element's Nesting is not allowed.
                see: https://github.com/w3c/csswg-drafts/issues/9702
                To sum up the issue, Nesting Selectors is de-sugared during its parse, and it ends up with :is() functional-pseudo-class.
                However, the :is() doesn't accept pseudo-elements, (because of the historical reasons), so the nesting of pseudo-elements is not allowed.
                The short historical reasons and current status: Pseudo-element is substantially not a simple selector, and it substantially behaves as a combinator.
                It's Defined in a CSS Data Model, like so: https://www.w3.org/TR/selectors-4/#data-model
                However, the :is(), functional-pseudo-class, works as a simple selector, and it does not accept pseudo-elements, which behaves as a combinator.
                So, if you nest a pseudo-element, it ends up with de-sugared to :is() and will eliminates the pseudo-element.
                */
                /* &:target-current {
                    background-color: purple;
                    border-color: purple;
                } */
            }

            .item::scroll-marker:target-current {
                background-color: purple;
                border-color: purple;
            }
        }

        /* scroll-target-group で任意の要素をスクロールマーカーグループとして利用する*/
        .anonymus-scroll-marker {
            margin-top: 50px;
            border: 1px solid #ccc;
            overflow-y: scroll;

            .my-scroll-marker-group {
                position: sticky;
                top: 20px;
                width: 80px;
                margin-left: auto;
                margin-right: 10px;
                z-index: 2;
                padding: 16px 16px 16px 32px;
                border: 1px solid #ccc;

                /* scroll-target-group に auto を指定した要素がスクロールマーカーグループとなる */
                scroll-target-group: auto;

                a:target-current {
                    color: red;
                }
            }

            .my-chapters {
                width: 95%;
                height: 400px;

                &>div {
                    background: #eee;
                    height: 400px;
                    margin: 10px;
                    padding: 10px;
                }
            }
        }

        /* 
        ////////////////////
        checker layer is always copy/pasted in every demo. 
        ////////////////////
        */
        @layer checker {
            .checker-dialog {
                padding: 1em;
                margin: 1em 0;
                border: 1px solid #ccc;
                color: black;
                text-align: center;
                position: fixed;
                bottom: 0;
                left: 1em;
                right: 1em;

                p {
                    margin: 0;
                }

                .judge {
                    font-weight: bold;
                }

                a {
                    color: blue;
                }

                /* CHOICE 1: IACVT color (which @support doesn't work.) */
                /* background: rgba(205 230 255 / 0.8);
                .judge {
                    display: none;
                } */
            }

            /* CHOICE 2: when @support is available */
            /* watch out!: @supports can check only at-parse time features. This means that e.g; Custom Properties are not properly detected bc CP is evaluated in Computed time. */
            /* put the feature name */
            /* true case */
            @supports selector(::scroll-marker:target-current) {
                .checker-dialog {
                    background: rgba(205 255 205 / 0.8);

                    .error {
                        display: none;
                    }

                    .note {
                        display: none;
                    }
                }
            }

            /* false case */
            @supports not selector(::scroll-marker:target-current) {
                .checker-dialog {
                    background: rgba(255 205 205 / 0.8);

                    .success {
                        display: none;
                    }
                }
            }
        }
    </style>
</head>

<body>
    <h1>Carousels with CSS </h1>
    <p>Summary: This is a combined Intent to ship for the following features:

        <br />
        <code>::scroll-marker</code> and <code>::scroll-marker-group</code> for scrolling containers:
        <br />
        Pseudo elements that allow to create a set of focusable markers for all of the associated items within the
        scrolling container.
        <br />

        <code>::scroll-button(<direction>)</code>:
        <br />
        Focusable pseudo-element button that allows scrolling the scrolling container in the associated direction.
        <br />

        <code>::column</code>:
        <br />
        Supports associating <code>::scroll-marker</code> elements with column fragments and scroll snap aligning to
        columns.
    </p>
    <p>Why Carousels are often not accessible?: However, making carousels accessible is often challenging. Managing
        focus,
        getting screen reader announcements right, and handling off-screen interactive elements is complicated,
        therefore the carousels on many sites are not accessible.
    </p>
    <p>Intent: <a
            href="https://groups.google.com/a/chromium.org/g/blink-dev/c/7EQ8-VzPZh0/m/NMyrGCjuAAAJ">https://groups.google.com/a/chromium.org/g/blink-dev/c/7EQ8-VzPZh0/m/NMyrGCjuAAAJ</a>
    </p>
    <p>Spec: <a
            href="https://drafts.csswg.org/css-overflow-5/#scroll-navigation">https://drafts.csswg.org/css-overflow-5/#scroll-navigation</a>
    </p>
    <p>Explainer: <a href="https://flackr.github.io/carousel/">https://flackr.github.io/carousel/</a>
    </p>
    <p>Other Resources:</p>
    <ul>
        <li><a href="https://developer.chrome.com/blog/carousels-with-css">Carousels with CSS  |  Blog  |  Chrome for
                Developers</a></li>
        <li><a href="https://chrome.dev/carousel/">Carousel Gallery</a></li>
        <li><a href="https://www.w3.org/WAI/ARIA/apg/patterns/carousel/">Carousel (Slide Show or Image Rotator) Pattern
                | APG | WAI | W3C</a></li>
    </ul>
    <p>=== This is a demo of CSS <code>::scroll-button()</code> and <code>::scroll-marker()</code> ===</p>

    <div class="container">
        <!-- role="region": Identify the carousel as a landmark region on the page, making it easier to navigate to. -->
        <!-- aria-live="polite": This is the magic ingredient. It tells screen readers to politely announce changes within this region, like when a new slide scrolls into view, without interrupting the user. -->
        <ul class="base carousel" data-anchor-name="--carousel-container" role="region" aria-label="Sample CSS Carousel"
            aria-live="polite">
            <li class="item">
                <div class="content">
                    Item 1
                </div>
            </li>
            <li class="item">
                <div class="content">
                    Item 2
                </div>
            </li>
            <li class="item">
                <div class="content">
                    Item 3
                </div>
            </li>
            <li class="item">
                <div class="content">
                    Item 4
                </div>
            </li>
            <li class="item">
                <div class="content">
                    Item 5
                </div>
            </li>
            <li class="item">
                <div class="content">
                    Item 6
                </div>
            </li>
            <li class="item">
                <div class="content">
                    Item 7
                </div>
            </li>
            <li class="item">
                <div class="content">
                    Item 8
                </div>
            </li>
            <li class="item">
                <div class="content">
                    Item 9
                </div>
            </li>
            <li class="item">
                <div class="content">
                    Item 10
                </div>
            </li>
        </ul>
    </div>

    <p>↓scroll-target-group を用いると、任意の要素をスクロールマーカーグループとして利用することが可能となり、柔軟なデザインやコンテンツのスクロールマーカーグループを実現できる↓</p>
    <a
        href="https://drafts.csswg.org/css-overflow-5/#scroll-target-group">https://drafts.csswg.org/css-overflow-5/#scroll-target-group</a>
    <div class="anonymus-scroll-marker">
        <ol class="my-scroll-marker-group">
            <li><a href="#ch1">Chapter 1</a></li>
            <li><a href="#ch2">Chapter 2</a></li>
            <li><a href="#ch3">Chapter 3</a></li>
        </ol>
        <div class="my-chapters">
            <div id="ch1">Chapter 1 content</div>
            <div id="ch2">Chapter 2 content</div>
            <div id="ch3">Chapter 3 content</div>
        </div>
    </div>

    <div class="checker-dialog">
        <p class="error judge">❌ Your browser doesn't support this feature.</p>
        <p class="success judge">✅ Your browser supports this feature!</p>
        <p>This is a demo for <a href=" https://drafts.csswg.org/css-overflow-5/#scroll-navigation" target="_top">
                https://drafts.csswg.org/css-overflow-5/#scroll-navigation</a>
        </p>
        <p class="note">Try it in Chrome 135 or over.
        </p>
        <small><time datetime="2025-07-01">This DEMO is last updated on: 2025-07-01</time></small>
    </div>
</body>

</html>